{"visual":{"name":"scrollyteller","displayName":"ScrollyTeller","guid":"scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG","visualClassName":"Visual","version":"1.0.2","description":"Enables scrollytelling with parallax effect","supportUrl":"https://github.com/deldersveld/pbiScrollyTeller","gitHubUrl":"https://github.com/deldersveld/pbiScrollyTeller"},"apiVersion":"1.7.0","author":{"name":"David Eldersveld"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Text","name":"category","kind":"Grouping"},{"displayName":"Image URL","name":"imageUrl","kind":"Grouping"}],"objects":{"dataPoint":{"displayName":"Display options","properties":{"fill":{"displayName":"Text Color","type":{"fill":{"solid":{"color":true}}}},"fontSize":{"displayName":"Text Size","type":{"formatting":{"fontSize":true}}},"fontFamily":{"displayName":"Font family","type":{"enumeration":[{"value":"Arial","displayName":"Arial"},{"value":"Arial Black","displayName":"Arial Black"},{"value":"Arial Unicode MS","displayName":"Arial Unicode MS"},{"value":"Bookman Old Style","displayName":"Bookman Old Style"},{"value":"Calibri","displayName":"Calibri"},{"value":"Cambria","displayName":"Cambria"},{"value":"Candara","displayName":"Candara"},{"value":"Castellar","displayName":"Castellar"},{"value":"Comic Sans MS","displayName":"Comic Sans MS"},{"value":"Consolas","displayName":"Consolas"},{"value":"Constantia","displayName":"Constantia"},{"value":"Corbel","displayName":"Corbel"},{"value":"Courier New","displayName":"Courier New"},{"value":"Georgia","displayName":"Georgia"},{"value":"Impact","displayName":"Impact"},{"value":"Lucida Calligraphy","displayName":"Lucida Calligraphy"},{"value":"Lucida Sans Unicode","displayName":"Lucida Sans Unicode"},{"value":"Segoe UI","displayName":"Segoe UI"},{"value":"Segoe UI Light","displayName":"Segoe UI Light"},{"value":"Symbol","displayName":"Symbol"},{"value":"Tahoma","displayName":"Tahoma"},{"value":"Times New Roman","displayName":"Times New Roman"},{"value":"Trebuchet MS","displayName":"Trebuchet MS"},{"value":"Verdana","displayName":"Verdana"}]}},"fontWeight":{"displayName":"Font weight","type":{"enumeration":[{"value":"Normal","displayName":"Normal"},{"value":"Bold","displayName":"Bold"}]}},"textAlign":{"displayName":"Alignment","type":{"enumeration":[{"value":"Center","displayName":"Center"},{"value":"Left","displayName":"Left"},{"value":"Right","displayName":"Right"}]}}}}},"dataViewMappings":[{"categorical":{"categories":{"select":[{"for":{"in":"category"}},{"bind":{"to":"imageUrl"}}],"dataReductionAlgorithm":{"top":{"count":30000}}}}}]},"stringResources":{},"content":{"js":"/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                // TODO: refactor & focus DataViewTransform into a service with well-defined dependencies.\r\n                var DataViewTransform;\r\n                (function (DataViewTransform) {\r\n                    // TODO: refactor this, setGrouped, and groupValues to a test helper to stop using it in the product\r\n                    function createValueColumns(values, valueIdentityFields, source) {\r\n                        if (values === void 0) { values = []; }\r\n                        var result = values;\r\n                        setGrouped(result);\r\n                        if (valueIdentityFields) {\r\n                            result.identityFields = valueIdentityFields;\r\n                        }\r\n                        if (source) {\r\n                            result.source = source;\r\n                        }\r\n                        return result;\r\n                    }\r\n                    DataViewTransform.createValueColumns = createValueColumns;\r\n                    function setGrouped(values, groupedResult) {\r\n                        values.grouped = groupedResult\r\n                            ? function () { return groupedResult; }\r\n                            : function () { return groupValues(values); };\r\n                    }\r\n                    DataViewTransform.setGrouped = setGrouped;\r\n                    /** Group together the values with a common identity. */\r\n                    function groupValues(values) {\r\n                        var groups = [], currentGroup;\r\n                        for (var i = 0, len = values.length; i < len; i++) {\r\n                            var value = values[i];\r\n                            if (!currentGroup || currentGroup.identity !== value.identity) {\r\n                                currentGroup = {\r\n                                    values: []\r\n                                };\r\n                                if (value.identity) {\r\n                                    currentGroup.identity = value.identity;\r\n                                    var source = value.source;\r\n                                    // allow null, which will be formatted as (Blank).\r\n                                    if (source.groupName !== undefined) {\r\n                                        currentGroup.name = source.groupName;\r\n                                    }\r\n                                    else if (source.displayName) {\r\n                                        currentGroup.name = source.displayName;\r\n                                    }\r\n                                }\r\n                                groups.push(currentGroup);\r\n                            }\r\n                            currentGroup.values.push(value);\r\n                        }\r\n                        return groups;\r\n                    }\r\n                    DataViewTransform.groupValues = groupValues;\r\n                })(DataViewTransform = dataview.DataViewTransform || (dataview.DataViewTransform = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataRoleHelper;\r\n                (function (DataRoleHelper) {\r\n                    function getMeasureIndexOfRole(grouped, roleName) {\r\n                        if (!grouped || !grouped.length) {\r\n                            return -1;\r\n                        }\r\n                        var firstGroup = grouped[0];\r\n                        if (firstGroup.values && firstGroup.values.length > 0) {\r\n                            for (var i = 0, len = firstGroup.values.length; i < len; ++i) {\r\n                                var value = firstGroup.values[i];\r\n                                if (value && value.source) {\r\n                                    if (hasRole(value.source, roleName)) {\r\n                                        return i;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    }\r\n                    DataRoleHelper.getMeasureIndexOfRole = getMeasureIndexOfRole;\r\n                    function getCategoryIndexOfRole(categories, roleName) {\r\n                        if (categories && categories.length) {\r\n                            for (var i = 0, ilen = categories.length; i < ilen; i++) {\r\n                                if (hasRole(categories[i].source, roleName)) {\r\n                                    return i;\r\n                                }\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    }\r\n                    DataRoleHelper.getCategoryIndexOfRole = getCategoryIndexOfRole;\r\n                    function hasRole(column, name) {\r\n                        var roles = column.roles;\r\n                        return roles && roles[name];\r\n                    }\r\n                    DataRoleHelper.hasRole = hasRole;\r\n                    function hasRoleInDataView(dataView, name) {\r\n                        return dataView != null\r\n                            && dataView.metadata != null\r\n                            && dataView.metadata.columns\r\n                            && dataView.metadata.columns.some(function (c) { return c.roles && c.roles[name] !== undefined; }); // any is an alias of some\r\n                    }\r\n                    DataRoleHelper.hasRoleInDataView = hasRoleInDataView;\r\n                    function hasRoleInValueColumn(valueColumn, name) {\r\n                        return valueColumn\r\n                            && valueColumn.source\r\n                            && valueColumn.source.roles\r\n                            && (valueColumn.source.roles[name] === true);\r\n                    }\r\n                    DataRoleHelper.hasRoleInValueColumn = hasRoleInValueColumn;\r\n                })(DataRoleHelper = dataview.DataRoleHelper || (dataview.DataRoleHelper = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObject;\r\n                (function (DataViewObject) {\r\n                    function getValue(object, propertyName, defaultValue) {\r\n                        if (!object) {\r\n                            return defaultValue;\r\n                        }\r\n                        var propertyValue = object[propertyName];\r\n                        if (propertyValue === undefined) {\r\n                            return defaultValue;\r\n                        }\r\n                        return propertyValue;\r\n                    }\r\n                    DataViewObject.getValue = getValue;\r\n                    /** Gets the solid color from a fill property using only a propertyName */\r\n                    function getFillColorByPropertyName(object, propertyName, defaultColor) {\r\n                        var value = getValue(object, propertyName);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    DataViewObject.getFillColorByPropertyName = getFillColorByPropertyName;\r\n                })(DataViewObject = dataview.DataViewObject || (dataview.DataViewObject = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObjects;\r\n                (function (DataViewObjects) {\r\n                    /** Gets the value of the given object/property pair. */\r\n                    function getValue(objects, propertyId, defaultValue) {\r\n                        if (!objects) {\r\n                            return defaultValue;\r\n                        }\r\n                        return dataview.DataViewObject.getValue(objects[propertyId.objectName], propertyId.propertyName, defaultValue);\r\n                    }\r\n                    DataViewObjects.getValue = getValue;\r\n                    /** Gets an object from objects. */\r\n                    function getObject(objects, objectName, defaultValue) {\r\n                        if (objects && objects[objectName]) {\r\n                            return objects[objectName];\r\n                        }\r\n                        return defaultValue;\r\n                    }\r\n                    DataViewObjects.getObject = getObject;\r\n                    /** Gets the solid color from a fill property. */\r\n                    function getFillColor(objects, propertyId, defaultColor) {\r\n                        var value = getValue(objects, propertyId);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    DataViewObjects.getFillColor = getFillColor;\r\n                    function getCommonValue(objects, propertyId, defaultValue) {\r\n                        var value = getValue(objects, propertyId, defaultValue);\r\n                        if (value && value.solid) {\r\n                            return value.solid.color;\r\n                        }\r\n                        if (value === undefined\r\n                            || value === null\r\n                            || (typeof value === \"object\" && !value.solid)) {\r\n                            return defaultValue;\r\n                        }\r\n                        return value;\r\n                    }\r\n                    DataViewObjects.getCommonValue = getCommonValue;\r\n                })(DataViewObjects = dataview.DataViewObjects || (dataview.DataViewObjects = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                // powerbi.extensibility.utils.dataview\r\n                var DataRoleHelper = powerbi.extensibility.utils.dataview.DataRoleHelper;\r\n                var converterHelper;\r\n                (function (converterHelper) {\r\n                    function categoryIsAlsoSeriesRole(dataView, seriesRoleName, categoryRoleName) {\r\n                        if (dataView.categories && dataView.categories.length > 0) {\r\n                            // Need to pivot data if our category soure is a series role\r\n                            var category = dataView.categories[0];\r\n                            return category.source &&\r\n                                DataRoleHelper.hasRole(category.source, seriesRoleName) &&\r\n                                DataRoleHelper.hasRole(category.source, categoryRoleName);\r\n                        }\r\n                        return false;\r\n                    }\r\n                    converterHelper.categoryIsAlsoSeriesRole = categoryIsAlsoSeriesRole;\r\n                    function getSeriesName(source) {\r\n                        return (source.groupName !== undefined)\r\n                            ? source.groupName\r\n                            : source.queryName;\r\n                    }\r\n                    converterHelper.getSeriesName = getSeriesName;\r\n                    function isImageUrlColumn(column) {\r\n                        var misc = getMiscellaneousTypeDescriptor(column);\r\n                        return misc != null && misc.imageUrl === true;\r\n                    }\r\n                    converterHelper.isImageUrlColumn = isImageUrlColumn;\r\n                    function isWebUrlColumn(column) {\r\n                        var misc = getMiscellaneousTypeDescriptor(column);\r\n                        return misc != null && misc.webUrl === true;\r\n                    }\r\n                    converterHelper.isWebUrlColumn = isWebUrlColumn;\r\n                    function getMiscellaneousTypeDescriptor(column) {\r\n                        return column\r\n                            && column.type\r\n                            && column.type.misc;\r\n                    }\r\n                    converterHelper.getMiscellaneousTypeDescriptor = getMiscellaneousTypeDescriptor;\r\n                    function hasImageUrlColumn(dataView) {\r\n                        if (!dataView || !dataView.metadata || !dataView.metadata.columns || !dataView.metadata.columns.length) {\r\n                            return false;\r\n                        }\r\n                        return dataView.metadata.columns.some(function (column) { return isImageUrlColumn(column) === true; });\r\n                    }\r\n                    converterHelper.hasImageUrlColumn = hasImageUrlColumn;\r\n                })(converterHelper = dataview.converterHelper || (dataview.converterHelper = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObjectsParser = (function () {\r\n                    function DataViewObjectsParser() {\r\n                    }\r\n                    DataViewObjectsParser.getDefault = function () {\r\n                        return new this();\r\n                    };\r\n                    DataViewObjectsParser.createPropertyIdentifier = function (objectName, propertyName) {\r\n                        return {\r\n                            objectName: objectName,\r\n                            propertyName: propertyName\r\n                        };\r\n                    };\r\n                    DataViewObjectsParser.parse = function (dataView) {\r\n                        var dataViewObjectParser = this.getDefault(), properties;\r\n                        if (!dataView || !dataView.metadata || !dataView.metadata.objects) {\r\n                            return dataViewObjectParser;\r\n                        }\r\n                        properties = dataViewObjectParser.getProperties();\r\n                        for (var objectName in properties) {\r\n                            for (var propertyName in properties[objectName]) {\r\n                                var defaultValue = dataViewObjectParser[objectName][propertyName];\r\n                                dataViewObjectParser[objectName][propertyName] = dataview.DataViewObjects.getCommonValue(dataView.metadata.objects, properties[objectName][propertyName], defaultValue);\r\n                            }\r\n                        }\r\n                        return dataViewObjectParser;\r\n                    };\r\n                    DataViewObjectsParser.isPropertyEnumerable = function (propertyName) {\r\n                        return !DataViewObjectsParser.InnumerablePropertyPrefix.test(propertyName);\r\n                    };\r\n                    DataViewObjectsParser.enumerateObjectInstances = function (dataViewObjectParser, options) {\r\n                        var dataViewProperties = dataViewObjectParser && dataViewObjectParser[options.objectName];\r\n                        if (!dataViewProperties) {\r\n                            return [];\r\n                        }\r\n                        var instance = {\r\n                            objectName: options.objectName,\r\n                            selector: null,\r\n                            properties: {}\r\n                        };\r\n                        for (var key in dataViewProperties) {\r\n                            if (dataViewProperties.hasOwnProperty(key)) {\r\n                                instance.properties[key] = dataViewProperties[key];\r\n                            }\r\n                        }\r\n                        return {\r\n                            instances: [instance]\r\n                        };\r\n                    };\r\n                    DataViewObjectsParser.prototype.getProperties = function () {\r\n                        var _this = this;\r\n                        var properties = {}, objectNames = Object.keys(this);\r\n                        objectNames.forEach(function (objectName) {\r\n                            if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                                var propertyNames = Object.keys(_this[objectName]);\r\n                                properties[objectName] = {};\r\n                                propertyNames.forEach(function (propertyName) {\r\n                                    if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                                        properties[objectName][propertyName] =\r\n                                            DataViewObjectsParser.createPropertyIdentifier(objectName, propertyName);\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        return properties;\r\n                    };\r\n                    return DataViewObjectsParser;\r\n                }());\r\n                DataViewObjectsParser.InnumerablePropertyPrefix = /^_/;\r\n                dataview.DataViewObjectsParser = DataViewObjectsParser;\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var scrollytellerE1D30D6506E94BB5AB73806C9D68D079;\r\n            (function (scrollytellerE1D30D6506E94BB5AB73806C9D68D079) {\r\n                \"use strict\";\r\n                var DataViewObjectsParser = powerbi.extensibility.utils.dataview.DataViewObjectsParser;\r\n                var VisualSettings = (function (_super) {\r\n                    __extends(VisualSettings, _super);\r\n                    function VisualSettings() {\r\n                        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n                        _this.dataPoint = new dataPointSettings();\r\n                        return _this;\r\n                    }\r\n                    return VisualSettings;\r\n                }(DataViewObjectsParser));\r\n                scrollytellerE1D30D6506E94BB5AB73806C9D68D079.VisualSettings = VisualSettings;\r\n                var dataPointSettings = (function () {\r\n                    function dataPointSettings() {\r\n                        // Fill\r\n                        this.fill = \"#FFFFFF\";\r\n                        // Text Size\r\n                        this.fontSize = 12;\r\n                        // Font Family\r\n                        this.fontFamily = \"Segoe UI\";\r\n                        // Font Weight\r\n                        this.fontWeight = \"Normal\";\r\n                        // Text Align\r\n                        this.textAlign = \"Center\";\r\n                        // Alternate odd numbered images as grayscale\r\n                        this.alternateGrayscale = true;\r\n                    }\r\n                    return dataPointSettings;\r\n                }());\r\n                scrollytellerE1D30D6506E94BB5AB73806C9D68D079.dataPointSettings = dataPointSettings;\r\n            })(scrollytellerE1D30D6506E94BB5AB73806C9D68D079 = visual.scrollytellerE1D30D6506E94BB5AB73806C9D68D079 || (visual.scrollytellerE1D30D6506E94BB5AB73806C9D68D079 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visual CLI\r\n *\r\n *  Copyright (c) 2017 by David Eldersveld\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var scrollytellerE1D30D6506E94BB5AB73806C9D68D079;\r\n            (function (scrollytellerE1D30D6506E94BB5AB73806C9D68D079) {\r\n                \"use strict\";\r\n                var DataRoleHelper = powerbi.extensibility.utils.dataview.DataRoleHelper;\r\n                function visualTransform(options, host) {\r\n                    var dataViews = options.dataViews;\r\n                    // console.log('visualTransform', dataViews);\r\n                    var viewModel = {\r\n                        scrollyDataPoints: []\r\n                    };\r\n                    if (!dataViews\r\n                        || !dataViews[0]\r\n                        || !dataViews[0].categorical\r\n                        || !dataViews[0].categorical.categories\r\n                        || !dataViews[0].categorical.categories[0].source)\r\n                        return viewModel;\r\n                    var categorical = dataViews[0].categorical;\r\n                    var scrollTextIndex = DataRoleHelper.getCategoryIndexOfRole(dataViews[0].categorical.categories, \"category\");\r\n                    var imageIndex = DataRoleHelper.getCategoryIndexOfRole(dataViews[0].categorical.categories, \"imageUrl\");\r\n                    var scrollTextCategory = categorical.categories[scrollTextIndex];\r\n                    var imageCategory = categorical.categories[imageIndex];\r\n                    var scDataPoints = [];\r\n                    for (var i = 0; i < scrollTextCategory.values.length; i++) {\r\n                        scDataPoints.push({\r\n                            scrollText: scrollTextCategory.values[i].toString(),\r\n                            imageUrl: imageCategory.values[i].toString()\r\n                        });\r\n                    }\r\n                    // console.log('sc', scDataPoints);\r\n                    return {\r\n                        scrollyDataPoints: scDataPoints\r\n                    };\r\n                }\r\n                var Visual = (function () {\r\n                    function Visual(options) {\r\n                        // console.log('Visual constructor', options);\r\n                        this.target = options.element;\r\n                        this.target.innerHTML = \"<div class=\\\"wrapper\\\" id=\\\"loader\\\"></div>\";\r\n                    }\r\n                    Visual.prototype.update = function (options) {\r\n                        this.settings = Visual.parseSettings(options && options.dataViews && options.dataViews[0]);\r\n                        // console.log('Visual update', options);\r\n                        // console.log('Visual settings', this.settings);\r\n                        var optionFontSize = this.settings.dataPoint.fontSize.toString() + \"px\";\r\n                        var optionFontColor = this.settings.dataPoint.fill;\r\n                        var optionFontFamily = this.settings.dataPoint.fontFamily;\r\n                        var optionFontWeight = this.settings.dataPoint.fontWeight;\r\n                        var optionTextAlign = this.settings.dataPoint.textAlign;\r\n                        var viewModel = visualTransform(options, this.host);\r\n                        // console.log('ViewModel', viewModel);\r\n                        var data = viewModel.scrollyDataPoints;\r\n                        var container = document.getElementById(\"loader\");\r\n                        while (container.firstChild) {\r\n                            container.removeChild(container.firstChild);\r\n                        }\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            var el = document.createElement(\"section\");\r\n                            el.classList.add(\"div-\" + i);\r\n                            el.classList.add(\"section\");\r\n                            el.classList.add(\"parallax\");\r\n                            el.style.backgroundImage = \"url('\" + data[i].imageUrl + \"')\";\r\n                            el.style.backgroundRepeat = \"no-repeat\";\r\n                            el.style.backgroundSize = \"100%\";\r\n                            el.style.transform = \"translateZ(-1px) scale(1.5)\";\r\n                            var b = document.createElement(\"section\");\r\n                            b.classList.add(\"section2\");\r\n                            b.style.backgroundImage = \"url('\" + data[i].imageUrl + \"')\";\r\n                            b.style.backgroundRepeat = \"no-repeat\";\r\n                            b.style.backgroundSize = \"50vh\";\r\n                            b.style.backgroundPosition = \"left\";\r\n                            container.appendChild(el);\r\n                            container.appendChild(b);\r\n                            var h = document.createElement(\"h1\");\r\n                            h.innerHTML = data[i].scrollText;\r\n                            h.classList.add(\"scrollyText\");\r\n                            h.style.color = optionFontColor;\r\n                            h.style.fontSize = optionFontSize;\r\n                            h.style.fontFamily = optionFontFamily;\r\n                            h.style.fontWeight = optionFontWeight;\r\n                            h.style.textAlign = optionTextAlign;\r\n                            b.appendChild(h);\r\n                        }\r\n                    };\r\n                    Visual.parseSettings = function (dataView) {\r\n                        return scrollytellerE1D30D6506E94BB5AB73806C9D68D079.VisualSettings.parse(dataView);\r\n                    };\r\n                    /**\r\n                     * This function gets called for each of the objects defined in the capabilities files and allows you to select which of the\r\n                     * objects and properties you want to expose to the users in the property pane.\r\n                     *\r\n                     */\r\n                    Visual.prototype.enumerateObjectInstances = function (options) {\r\n                        return scrollytellerE1D30D6506E94BB5AB73806C9D68D079.VisualSettings.enumerateObjectInstances(this.settings || scrollytellerE1D30D6506E94BB5AB73806C9D68D079.VisualSettings.getDefault(), options);\r\n                    };\r\n                    return Visual;\r\n                }());\r\n                scrollytellerE1D30D6506E94BB5AB73806C9D68D079.Visual = Visual;\r\n            })(scrollytellerE1D30D6506E94BB5AB73806C9D68D079 = visual.scrollytellerE1D30D6506E94BB5AB73806C9D68D079 || (visual.scrollytellerE1D30D6506E94BB5AB73806C9D68D079 = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var visuals;\r\n    (function (visuals) {\r\n        var plugins;\r\n        (function (plugins) {\r\n            plugins.scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG = {\r\n                name: 'scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG',\r\n                displayName: 'ScrollyTeller',\r\n                class: 'Visual',\r\n                version: '1.0.2',\r\n                apiVersion: '1.7.0',\r\n                create: function (options) { return new powerbi.extensibility.visual.scrollytellerE1D30D6506E94BB5AB73806C9D68D079.Visual(options); },\r\n                custom: true\r\n            };\r\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\r\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\r\n})(powerbi || (powerbi = {}));\r\n//# sourceMappingURL=visual.js.map","css":".visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG body,\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG html {\n  margin: 0;\n  padding: 0;\n}\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG .wrapper {\n  height: 100vh;\n  overflow-x: hidden;\n  overflow-y: auto;\n  perspective: 2px;\n}\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG .section {\n  position: relative;\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-shadow: 0 0 3px #222222;\n  -webkit-filter: grayscale(100%);\n  filter: gray;\n}\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG .section2 {\n  position: relative;\n  height: 50vh;\n  width: 100%;\n  background: #000000;\n  display: fixed;\n  align-items: center;\n  justify-content: center;\n  text-shadow: 0 0 3px #222222;\n  z-index: 1;\n}\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG .parallax::after {\n  content: \" \";\n  position: absolute;\n  vertical-align: middle;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  transform: translateZ(-1px) scale(1.5);\n  z-index: -1;\n}\n.visual-scrollytellerE1D30D6506E94BB5AB73806C9D68D079_DEBUG .scrollyText {\n  padding-left: 25px;\n  padding-right: 25px;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTczbp9jAAABrklEQVQ4T+2Uz0vCYBjHF3To1KFb9GMILn9PLxH0R6iHPAnhqa79Bf0R3eZB9CDqTiIGiT8QBhP04CEQjxIDi/Lglpq1Wc/mM0tnZnUK+sL3MN7n+bzf9932EKhVi8Vy6HK5Ln0+Xz8cDsuf2e/3iw6Hg4Habew1yul00sFg8Dqbzd73Qa8LlE6nOwBTwBxN0weImBbseByLxRaCdPE8LwBIQVegdx8x74KEp5FI5Al7Fqrdbne9Xq8MsBGkfIHeK4/HQyFqLLfbvTRQVaFQGAJUTahBIeWF2WxeR9z3EuqSJKnXaDRauVzuLhAI3AB0B3FGYL1eH+Tz+REkmZjjuGdcNiiRSEg2m41E3M8SftQfBM6+5Wq1OiyVSkqxWJxrda1Wq03q/+/QeIflcllOpVIKwzDyPLMsK6s1WL5cQlEUH5vNZmue1TUs02QAwv948psjJ5NJyW637yJOAx7F4/GpXZeVIAhddZZardZNxBEERVFboVCIj0ajA3XIwnd2C9/bxLPPujOZzANM+C7AzkiSXEOcphWTybQH44gF98D6AP3KHbj/czjuxhhDEG+qRTZc7C0QUQAAAABJRU5ErkJggg=="}}